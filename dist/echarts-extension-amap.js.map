{"version":3,"file":"echarts-extension-amap.js","sources":["../src/AMapCoordSys.js","../src/helper.js","../src/AMapModel.js","../node_modules/lodash.debounce/index.js","../src/AMapView.js","../src/index.js","../index.js"],"sourcesContent":["/* global AMap */\n\nimport { util as zrUtil, graphic, matrix } from 'echarts/lib/echarts'\n\nfunction dataToCoordSize(dataSize, dataItem) {\n  dataItem = dataItem || [0, 0];\n  return zrUtil.map(\n    [0, 1],\n    function(dimIdx) {\n      const val = dataItem[dimIdx]\n      const halfSize = dataSize[dimIdx] / 2\n      const p1 = []\n      const p2 = []\n      p1[dimIdx] = val - halfSize\n      p2[dimIdx] = val + halfSize\n      p1[1 - dimIdx] = p2[1 - dimIdx] = dataItem[1 - dimIdx]\n      return Math.abs(\n        this.dataToPoint(p1)[dimIdx] - this.dataToPoint(p2)[dimIdx]\n      )\n    },\n    this\n  )\n}\n\n// exclude private and unsupported options\nconst excludedOptions = [\n  'echartsLayerZIndex', // DEPRECATED since v1.9.0\n  'echartsLayerInteractive',\n  'renderOnMoving',\n  'largeMode',\n  'layers'\n]\n\nfunction AMapCoordSys(amap, api) {\n  this._amap = amap\n  this._api = api\n  this._mapOffset = [0, 0]\n  // this.dimensions = ['lng', 'lat']\n}\n\nconst AMapCoordSysProto = AMapCoordSys.prototype\n\nAMapCoordSysProto.setZoom = function(zoom) {\n  this._zoom = zoom\n}\n\nAMapCoordSysProto.setCenter = function(center) {\n  const lnglat = new AMap.LngLat(center[0], center[1])\n  this._center = this._amap.lngLatToContainer(lnglat)\n}\n\nAMapCoordSysProto.setMapOffset = function(mapOffset) {\n  this._mapOffset = mapOffset\n}\n\nAMapCoordSysProto.setAMap = function(amap) {\n  this._amap = amap\n}\n\nAMapCoordSysProto.getAMap = function() {\n  return this._amap\n}\n\nAMapCoordSysProto.dataToPoint = function(data) {\n  const lnglat = new AMap.LngLat(data[0], data[1])\n  const px = this._amap.lngLatToContainer(lnglat)\n  const mapOffset = this._mapOffset\n  return [px.x - mapOffset[0], px.y - mapOffset[1]]\n}\n\nAMapCoordSysProto.pointToData = function(pt) {\n  const mapOffset = this._mapOffset\n  const lnglat = this._amap.containerToLngLat(\n    new AMap.Pixel(\n      pt[0] + mapOffset[0],\n      pt[1] + mapOffset[1]\n    )\n  )\n  return [lnglat.lng, lnglat.lat]\n}\n\nAMapCoordSysProto.getViewRect = function() {\n  const api = this._api\n  return new graphic.BoundingRect(0, 0, api.getWidth(), api.getHeight())\n}\n\nAMapCoordSysProto.getRoamTransform = function() {\n  return matrix.create()\n}\n\nAMapCoordSysProto.prepareCustoms = function() {\n  const rect = this.getViewRect()\n  return {\n    coordSys: {\n      // The name exposed to user is always 'cartesian2d' but not 'grid'.\n      type: 'amap',\n      x: rect.x,\n      y: rect.y,\n      width: rect.width,\n      height: rect.height\n    },\n    api: {\n      coord: zrUtil.bind(this.dataToPoint, this),\n      size: zrUtil.bind(dataToCoordSize, this)\n    }\n  }\n}\n\nAMapCoordSys.create = function(ecModel, api) {\n  let amapCoordSys\n  ecModel.eachComponent('amap', function(amapModel) {\n    if (typeof AMap === 'undefined') {\n      throw new Error('AMap api is not loaded')\n    }\n    if (amapCoordSys) {\n      throw new Error('Only one amap component can exist')\n    }\n    let amap = amapModel.getAMap()\n    const echartsLayerInteractive = amapModel.get('echartsLayerInteractive')\n    if (!amap) {\n      const root = api.getDom()\n      const painter = api.getZr().painter\n      const viewportRoot = painter.getViewportRoot()\n      // PENDING not hidden?\n      viewportRoot.style.visibility = 'hidden'\n      // Not support IE8\n      let amapRoot = root.querySelector('.ec-extension-amap')\n      if (amapRoot) {\n        // Reset viewport left and top, which will be changed\n        // in moving handler in AMapView\n        viewportRoot.style.left = '0px'\n        viewportRoot.style.top = '0px'\n        root.removeChild(amapRoot)\n      }\n      amapRoot = document.createElement('div')\n      amapRoot.className = 'ec-extension-amap'\n      amapRoot.style.cssText = 'position:absolute;top:0;left:0;bottom:0;right:0;'\n      root.appendChild(amapRoot)\n\n      const options = zrUtil.clone(amapModel.get())\n      if ('echartsLayerZIndex' in options) {\n        console.warn('[ECharts][Extension][AMap] DEPRECATED: the option `echartsLayerZIndex` has been removed since v1.9.0, use `echartsLayerInteractive` instead.')\n      }\n      // delete excluded options\n      zrUtil.each(excludedOptions, function(key) {\n        delete options[key]\n      })\n\n      amap = new AMap.Map(amapRoot, options)\n      amapModel.setAMap(amap)\n\n      // use `complete` callback to avoid NPE when first load amap\n      amap.on('complete', function() {\n        amapRoot.querySelector('.amap-maps').appendChild(viewportRoot)\n        // PENDING\n        viewportRoot.style.visibility = ''\n      })\n\n      amapModel.setEChartsLayer(viewportRoot)\n\n      // Override\n      painter.getViewportRootOffset = function() {\n        return { offsetLeft: 0, offsetTop: 0 }\n      }\n    }\n\n    const oldEChartsLayerInteractive = amapModel.__echartsLayerInteractive\n    if (oldEChartsLayerInteractive !== echartsLayerInteractive) {\n      amapModel.setEChartsLayerInteractive(echartsLayerInteractive)\n      amapModel.__echartsLayerInteractive = echartsLayerInteractive\n    }\n\n    const center = amapModel.get('center')\n    const zoom = amapModel.get('zoom')\n    if (center && zoom) {\n      const amapCenter = amap.getCenter()\n      const amapZoom = amap.getZoom()\n      const centerOrZoomChanged = amapModel.centerOrZoomChanged(\n        [amapCenter.lng, amapCenter.lat],\n        amapZoom\n      )\n      if (centerOrZoomChanged) {\n        amap.setZoomAndCenter(zoom, new AMap.LngLat(center[0], center[1]))\n      }\n    }\n\n    // update map style(#13)\n    const originalMapStyle = amapModel.__mapStyle\n    const newMapStyle = amapModel.get('mapStyle')\n    if (originalMapStyle !== newMapStyle) {\n      amap.setMapStyle(newMapStyle)\n      amapModel.__mapStyle = newMapStyle\n    }\n\n    // update map lang\n    // PENDING: AMap 2.x does not support `setLang` yet\n    if (amap.setLang) {\n      const originalMapLang = amapModel.__mapLang\n      const newMapLang = amapModel.get('lang')\n      if (originalMapLang !== newMapLang) {\n        amap.setLang(newMapLang)\n        amapModel.__mapLang = newMapLang\n      }\n    }\n\n    amapCoordSys = new AMapCoordSys(amap, api)\n    amapCoordSys.setMapOffset(amapModel.__mapOffset || [0, 0])\n    amapCoordSys.setZoom(zoom)\n    amapCoordSys.setCenter(center)\n\n    amapModel.coordinateSystem = amapCoordSys\n  })\n\n  ecModel.eachSeries(function(seriesModel) {\n    if (seriesModel.get('coordinateSystem') === 'amap') {\n      seriesModel.coordinateSystem = amapCoordSys\n    }\n  })\n}\n\nAMapCoordSysProto.dimensions = AMapCoordSys.dimensions = ['lng', 'lat']\n\nexport default AMapCoordSys\n","import { version } from 'echarts/lib/echarts'\n\nexport const isV5 = version.split('.')[0] > 4\n\nexport function v2Equal(a, b) {\n  return a && b && a[0] === b[0] && a[1] === b[1]\n}\n","import { ComponentModel } from 'echarts/lib/echarts'\nimport { isV5, v2Equal } from './helper'\n\nconst AMapModel = {\n  type: 'amap',\n\n  setAMap(amap) {\n    this.__amap = amap\n  },\n\n  getAMap() {\n    return this.__amap\n  },\n\n  setEChartsLayer(layer) {\n    this.__echartsLayer = layer\n  },\n\n  getEChartsLayer() {\n    return this.__echartsLayer\n  },\n\n  setEChartsLayerVisiblity(visible) {\n    this.__echartsLayer.style.display = visible ? 'block' : 'none'\n  },\n\n  // FIXME: NOT SUPPORT <= IE 10\n  setEChartsLayerInteractive(interactive) {\n    this.option.echartsLayerInteractive = !!interactive\n    this.__echartsLayer.style.pointerEvents = interactive ? 'auto' : 'none'\n  },\n\n  setCenterAndZoom(center, zoom) {\n    this.option.center = center\n    this.option.zoom = zoom\n  },\n\n  centerOrZoomChanged(center, zoom) {\n    const option = this.option\n    return !(v2Equal(center, option.center) && zoom === option.zoom)\n  },\n\n  defaultOption: {\n    center: [116.397428, 39.90923],\n    zoom: 5,\n    isHotspot: false,\n    resizeEnable: true,\n\n    // extension specific options\n    // echartsLayerZIndex: 2000, // DEPRECATED since v1.9.0\n    echartsLayerInteractive: true,\n    renderOnMoving: true,\n    largeMode: false\n  }\n}\n\nexport default isV5\n  ? ComponentModel.extend(AMapModel)\n  : AMapModel\n","/**\n * lodash (Custom Build) <https://lodash.com/>\n * Build: `lodash modularize exports=\"npm\" -o ./`\n * Copyright jQuery Foundation and other contributors <https://jquery.org/>\n * Released under MIT license <https://lodash.com/license>\n * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n */\n\n/** Used as the `TypeError` message for \"Functions\" methods. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/** Used as references for various `Number` constants. */\nvar NAN = 0 / 0;\n\n/** `Object#toString` result references. */\nvar symbolTag = '[object Symbol]';\n\n/** Used to match leading and trailing whitespace. */\nvar reTrim = /^\\s+|\\s+$/g;\n\n/** Used to detect bad signed hexadecimal string values. */\nvar reIsBadHex = /^[-+]0x[0-9a-f]+$/i;\n\n/** Used to detect binary string values. */\nvar reIsBinary = /^0b[01]+$/i;\n\n/** Used to detect octal string values. */\nvar reIsOctal = /^0o[0-7]+$/i;\n\n/** Built-in method references without a dependency on `root`. */\nvar freeParseInt = parseInt;\n\n/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar objectToString = objectProto.toString;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max,\n    nativeMin = Math.min;\n\n/**\n * Gets the timestamp of the number of milliseconds that have elapsed since\n * the Unix epoch (1 January 1970 00:00:00 UTC).\n *\n * @static\n * @memberOf _\n * @since 2.4.0\n * @category Date\n * @returns {number} Returns the timestamp.\n * @example\n *\n * _.defer(function(stamp) {\n *   console.log(_.now() - stamp);\n * }, _.now());\n * // => Logs the number of milliseconds it took for the deferred invocation.\n */\nvar now = function() {\n  return root.Date.now();\n};\n\n/**\n * Creates a debounced function that delays invoking `func` until after `wait`\n * milliseconds have elapsed since the last time the debounced function was\n * invoked. The debounced function comes with a `cancel` method to cancel\n * delayed `func` invocations and a `flush` method to immediately invoke them.\n * Provide `options` to indicate whether `func` should be invoked on the\n * leading and/or trailing edge of the `wait` timeout. The `func` is invoked\n * with the last arguments provided to the debounced function. Subsequent\n * calls to the debounced function return the result of the last `func`\n * invocation.\n *\n * **Note:** If `leading` and `trailing` options are `true`, `func` is\n * invoked on the trailing edge of the timeout only if the debounced function\n * is invoked more than once during the `wait` timeout.\n *\n * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred\n * until to the next tick, similar to `setTimeout` with a timeout of `0`.\n *\n * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)\n * for details over the differences between `_.debounce` and `_.throttle`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to debounce.\n * @param {number} [wait=0] The number of milliseconds to delay.\n * @param {Object} [options={}] The options object.\n * @param {boolean} [options.leading=false]\n *  Specify invoking on the leading edge of the timeout.\n * @param {number} [options.maxWait]\n *  The maximum time `func` is allowed to be delayed before it's invoked.\n * @param {boolean} [options.trailing=true]\n *  Specify invoking on the trailing edge of the timeout.\n * @returns {Function} Returns the new debounced function.\n * @example\n *\n * // Avoid costly calculations while the window size is in flux.\n * jQuery(window).on('resize', _.debounce(calculateLayout, 150));\n *\n * // Invoke `sendMail` when clicked, debouncing subsequent calls.\n * jQuery(element).on('click', _.debounce(sendMail, 300, {\n *   'leading': true,\n *   'trailing': false\n * }));\n *\n * // Ensure `batchLog` is invoked once after 1 second of debounced calls.\n * var debounced = _.debounce(batchLog, 250, { 'maxWait': 1000 });\n * var source = new EventSource('/stream');\n * jQuery(source).on('message', debounced);\n *\n * // Cancel the trailing debounced invocation.\n * jQuery(window).on('popstate', debounced.cancel);\n */\nfunction debounce(func, wait, options) {\n  var lastArgs,\n      lastThis,\n      maxWait,\n      result,\n      timerId,\n      lastCallTime,\n      lastInvokeTime = 0,\n      leading = false,\n      maxing = false,\n      trailing = true;\n\n  if (typeof func != 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  wait = toNumber(wait) || 0;\n  if (isObject(options)) {\n    leading = !!options.leading;\n    maxing = 'maxWait' in options;\n    maxWait = maxing ? nativeMax(toNumber(options.maxWait) || 0, wait) : maxWait;\n    trailing = 'trailing' in options ? !!options.trailing : trailing;\n  }\n\n  function invokeFunc(time) {\n    var args = lastArgs,\n        thisArg = lastThis;\n\n    lastArgs = lastThis = undefined;\n    lastInvokeTime = time;\n    result = func.apply(thisArg, args);\n    return result;\n  }\n\n  function leadingEdge(time) {\n    // Reset any `maxWait` timer.\n    lastInvokeTime = time;\n    // Start the timer for the trailing edge.\n    timerId = setTimeout(timerExpired, wait);\n    // Invoke the leading edge.\n    return leading ? invokeFunc(time) : result;\n  }\n\n  function remainingWait(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime,\n        result = wait - timeSinceLastCall;\n\n    return maxing ? nativeMin(result, maxWait - timeSinceLastInvoke) : result;\n  }\n\n  function shouldInvoke(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime;\n\n    // Either this is the first call, activity has stopped and we're at the\n    // trailing edge, the system time has gone backwards and we're treating\n    // it as the trailing edge, or we've hit the `maxWait` limit.\n    return (lastCallTime === undefined || (timeSinceLastCall >= wait) ||\n      (timeSinceLastCall < 0) || (maxing && timeSinceLastInvoke >= maxWait));\n  }\n\n  function timerExpired() {\n    var time = now();\n    if (shouldInvoke(time)) {\n      return trailingEdge(time);\n    }\n    // Restart the timer.\n    timerId = setTimeout(timerExpired, remainingWait(time));\n  }\n\n  function trailingEdge(time) {\n    timerId = undefined;\n\n    // Only invoke if we have `lastArgs` which means `func` has been\n    // debounced at least once.\n    if (trailing && lastArgs) {\n      return invokeFunc(time);\n    }\n    lastArgs = lastThis = undefined;\n    return result;\n  }\n\n  function cancel() {\n    if (timerId !== undefined) {\n      clearTimeout(timerId);\n    }\n    lastInvokeTime = 0;\n    lastArgs = lastCallTime = lastThis = timerId = undefined;\n  }\n\n  function flush() {\n    return timerId === undefined ? result : trailingEdge(now());\n  }\n\n  function debounced() {\n    var time = now(),\n        isInvoking = shouldInvoke(time);\n\n    lastArgs = arguments;\n    lastThis = this;\n    lastCallTime = time;\n\n    if (isInvoking) {\n      if (timerId === undefined) {\n        return leadingEdge(lastCallTime);\n      }\n      if (maxing) {\n        // Handle invocations in a tight loop.\n        timerId = setTimeout(timerExpired, wait);\n        return invokeFunc(lastCallTime);\n      }\n    }\n    if (timerId === undefined) {\n      timerId = setTimeout(timerExpired, wait);\n    }\n    return result;\n  }\n  debounced.cancel = cancel;\n  debounced.flush = flush;\n  return debounced;\n}\n\n/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return !!value && (type == 'object' || type == 'function');\n}\n\n/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return !!value && typeof value == 'object';\n}\n\n/**\n * Checks if `value` is classified as a `Symbol` primitive or object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a symbol, else `false`.\n * @example\n *\n * _.isSymbol(Symbol.iterator);\n * // => true\n *\n * _.isSymbol('abc');\n * // => false\n */\nfunction isSymbol(value) {\n  return typeof value == 'symbol' ||\n    (isObjectLike(value) && objectToString.call(value) == symbolTag);\n}\n\n/**\n * Converts `value` to a number.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to process.\n * @returns {number} Returns the number.\n * @example\n *\n * _.toNumber(3.2);\n * // => 3.2\n *\n * _.toNumber(Number.MIN_VALUE);\n * // => 5e-324\n *\n * _.toNumber(Infinity);\n * // => Infinity\n *\n * _.toNumber('3.2');\n * // => 3.2\n */\nfunction toNumber(value) {\n  if (typeof value == 'number') {\n    return value;\n  }\n  if (isSymbol(value)) {\n    return NAN;\n  }\n  if (isObject(value)) {\n    var other = typeof value.valueOf == 'function' ? value.valueOf() : value;\n    value = isObject(other) ? (other + '') : other;\n  }\n  if (typeof value != 'string') {\n    return value === 0 ? value : +value;\n  }\n  value = value.replace(reTrim, '');\n  var isBinary = reIsBinary.test(value);\n  return (isBinary || reIsOctal.test(value))\n    ? freeParseInt(value.slice(2), isBinary ? 2 : 8)\n    : (reIsBadHex.test(value) ? NAN : +value);\n}\n\nmodule.exports = debounce;\n","\nimport { ComponentView } from 'echarts/lib/echarts'\nimport { isV5 } from './helper'\nimport debounce from 'lodash.debounce'\n\n/* global AMap */\n\nconst AMapView = {\n  type: 'amap',\n\n  init() {\n    this._isFirstRender = true\n  },\n\n  render(amapModel, ecModel, api) {\n    let rendering = true\n\n    const amap = amapModel.getAMap()\n    const viewportRoot = api.getZr().painter.getViewportRoot()\n    const offsetEl = amap.getContainer()\n    const coordSys = amapModel.coordinateSystem\n\n    const renderOnMoving = amapModel.get('renderOnMoving')\n    const resizeEnable = amapModel.get('resizeEnable')\n    const largeMode = amapModel.get('largeMode')\n\n    // `AMap.version` only exists in AMap 2.x\n    // For AMap 1.x, it's `AMap.v`\n    const is2X = AMap.version >= 2\n    const is3DMode = amap.getViewMode_() === '3D'\n\n    let moveHandler = function() {\n      if (rendering) {\n        return\n      }\n\n      const offsetElStyle = offsetEl.style\n      const mapOffset = [\n        -parseInt(offsetElStyle.left, 10) || 0,\n        -parseInt(offsetElStyle.top, 10) || 0\n      ]\n      // only update style when map offset changed\n      const viewportRootStyle = viewportRoot.style\n      const offsetLeft = mapOffset[0] + 'px'\n      const offsetTop = mapOffset[1] + 'px'\n      if (viewportRootStyle.left !== offsetLeft) {\n        viewportRootStyle.left = offsetLeft\n      }\n      if (viewportRootStyle.top !== offsetTop) {\n        viewportRootStyle.top = offsetTop\n      }\n\n      coordSys.setMapOffset(amapModel.__mapOffset = mapOffset)\n\n      api.dispatchAction({\n        type: 'amapRoam',\n        animation: {\n          // compatible with ECharts 5.x\n          // no delay for rendering but remain animation of elements\n          duration: 0\n        }\n      })\n    }\n\n    amap.off('mapmove', this._moveHandler)\n    amap.off('moveend', this._moveHandler)\n    amap.off('viewchange', this._moveHandler)\n    amap.off('camerachange', this._moveHandler)\n    amap.off('zoom', this._moveHandler)\n\n    if (this._resizeHandler) {\n      amap.off('resize', this._resizeHandler)\n    }\n    if (this._moveStartHandler) {\n      amap.off('movestart', this._moveStartHandler)\n    }\n    if (this._moveEndHandler) {\n      amap.off('moveend', this._moveEndHandler)\n      amap.off('zoomend', this._moveEndHandler)\n    }\n\n    amap.on(\n      renderOnMoving\n        ? (is2X\n          ? 'viewchange'\n          : is3DMode\n            ? 'camerachange'\n            : 'mapmove')\n        : 'moveend',\n      // FIXME: bad performance in 1.x in the cases with large data, use debounce?\n      // moveHandler\n      (!is2X && largeMode) ? (moveHandler = debounce(moveHandler, 20)) : moveHandler\n    )\n\n    this._moveHandler = moveHandler\n\n    if (renderOnMoving && !(is2X && is3DMode)) {\n      // need to listen to zoom if 1.x & 2D mode\n      // FIXME: unnecessary `mapmove` event triggered when zooming\n      amap.on('zoom', moveHandler)\n    }\n\n    if (!renderOnMoving) {\n      amap.on('movestart', this._moveStartHandler = function(e) {\n        setTimeout(function() {\n          amapModel.setEChartsLayerVisiblity(false)\n        }, 0)\n      })\n      const moveEndHandler = this._moveEndHandler = function(e) {\n        ;(!e || e.type !== 'moveend') && moveHandler()\n        setTimeout(function() {\n          amapModel.setEChartsLayerVisiblity(true)\n        }, is2X || !largeMode ? 0 : 20)\n      }\n      amap.on('moveend', moveEndHandler)\n      amap.on('zoomend', moveEndHandler)\n      if (this._isFirstRender && is3DMode) {\n        // FIXME: not rewrite AMap instance method\n        const nativeSetPicth = amap.setPitch\n        const nativeSetRotation = amap.setRotation\n        amap.setPitch = function() {\n          nativeSetPicth.apply(this, arguments)\n          moveEndHandler()\n        }\n        amap.setRotation = function() {\n          nativeSetRotation.apply(this, arguments)\n          moveEndHandler()\n        }\n      }\n    }\n\n    if (resizeEnable) {\n      let resizeHandler = function() {\n        echarts.getInstanceByDom(api.getDom()).resize()\n      }\n      if (!is2X && largeMode) {\n        resizeHandler = debounce(resizeHandler, 20)\n      }\n      amap.on('resize', this._resizeHandler = resizeHandler)\n    }\n\n    this._isFirstRender = rendering = false\n  },\n\n  dispose(ecModel) {\n    const component = ecModel.getComponent('amap')\n    if (component) {\n      component.getAMap().destroy()\n      component.setAMap(null)\n      component.setEChartsLayer(null)\n      if (component.coordinateSystem) {\n        component.coordinateSystem.setAMap(null)\n        component.coordinateSystem = null\n      }\n      delete this._moveHandler\n      delete this._resizeHandler\n      delete this._moveStartHandler\n      delete this._moveEndHandler\n    }\n  }\n}\n\nexport default isV5\n  ? ComponentView.extend(AMapView)\n  : AMapView\n","/**\n * AMap component extension\n */\n\nimport AMapCoordSys from './AMapCoordSys'\nimport AMapModel from './AMapModel'\nimport AMapView from './AMapView'\nimport { isV5 } from './helper'\n\nexport { version, name } from '../package.json'\n\nexport function install(registers) {\n  // Model\n  isV5\n    ? registers.registerComponentModel(AMapModel)\n    : registers.extendComponentModel(AMapModel)\n  // View\n  isV5\n    ? registers.registerComponentView(AMapView)\n    : registers.extendComponentView(AMapView)\n  // Coordinate System\n  registers.registerCoordinateSystem('amap', AMapCoordSys)\n  // Action\n  registers.registerAction(\n    {\n      type: 'amapRoam',\n      event: 'amapRoam',\n      update: 'updateLayout'\n    },\n    function(payload, ecModel) {\n      ecModel.eachComponent('amap', function(amapModel) {\n        const amap = amapModel.getAMap()\n        const center = amap.getCenter()\n        amapModel.setCenterAndZoom([center.lng, center.lat], amap.getZoom())\n      })\n    }\n  )\n}\n","import * as echarts from 'echarts/lib/echarts'\nimport { install } from './src/index'\nimport { isV5 } from './src/helper'\n\nisV5 ? echarts.use(install) : install(echarts)\n\nexport { name, version } from './src/index'\n"],"names":["dataToCoordSize","dataSize","dataItem","zrUtil","map","dimIdx","val","halfSize","p1","p2","Math","abs","dataToPoint","excludedOptions","AMapCoordSys","amap","api","_amap","_api","_mapOffset","AMapCoordSysProto","prototype","setZoom","zoom","_zoom","setCenter","center","lnglat","AMap","LngLat","_center","lngLatToContainer","setMapOffset","mapOffset","setAMap","getAMap","data","px","x","y","pointToData","pt","containerToLngLat","Pixel","lng","lat","getViewRect","graphic","BoundingRect","getWidth","getHeight","getRoamTransform","matrix","create","prepareCustoms","rect","coordSys","type","width","height","coord","bind","size","ecModel","amapCoordSys","eachComponent","amapModel","Error","echartsLayerInteractive","get","root","getDom","painter","getZr","viewportRoot","getViewportRoot","style","visibility","amapRoot","querySelector","left","top","removeChild","document","createElement","className","cssText","appendChild","options","clone","console","warn","each","key","Map","on","setEChartsLayer","getViewportRootOffset","offsetLeft","offsetTop","oldEChartsLayerInteractive","__echartsLayerInteractive","setEChartsLayerInteractive","amapCenter","getCenter","amapZoom","getZoom","centerOrZoomChanged","setZoomAndCenter","originalMapStyle","__mapStyle","newMapStyle","setMapStyle","setLang","originalMapLang","__mapLang","newMapLang","__mapOffset","coordinateSystem","eachSeries","seriesModel","dimensions","isV5","version","split","v2Equal","a","b","AMapModel","__amap","layer","__echartsLayer","getEChartsLayer","setEChartsLayerVisiblity","visible","display","interactive","option","pointerEvents","setCenterAndZoom","defaultOption","isHotspot","resizeEnable","renderOnMoving","largeMode","ComponentModel","extend","FUNC_ERROR_TEXT","NAN","symbolTag","reTrim","reIsBadHex","reIsBinary","reIsOctal","freeParseInt","parseInt","freeGlobal","global","Object","freeSelf","self","Function","objectProto","objectToString","toString","nativeMax","max","nativeMin","min","now","Date","debounce","func","wait","lastArgs","lastThis","maxWait","result","timerId","lastCallTime","lastInvokeTime","leading","maxing","trailing","TypeError","toNumber","isObject","invokeFunc","time","args","thisArg","undefined","apply","leadingEdge","setTimeout","timerExpired","remainingWait","timeSinceLastCall","timeSinceLastInvoke","shouldInvoke","trailingEdge","cancel","clearTimeout","flush","debounced","isInvoking","arguments","value","isObjectLike","isSymbol","call","other","valueOf","replace","isBinary","test","slice","AMapView","init","_isFirstRender","render","rendering","offsetEl","getContainer","is2X","is3DMode","getViewMode_","moveHandler","offsetElStyle","viewportRootStyle","dispatchAction","animation","duration","off","_moveHandler","_resizeHandler","_moveStartHandler","_moveEndHandler","e","moveEndHandler","nativeSetPicth","setPitch","nativeSetRotation","setRotation","resizeHandler","echarts","getInstanceByDom","resize","dispose","component","getComponent","destroy","ComponentView","install","registers","registerComponentModel","extendComponentModel","registerComponentView","extendComponentView","registerCoordinateSystem","registerAction","event","update","payload"],"mappings":"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"}